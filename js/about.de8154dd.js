"use strict";(self["webpackChunkradarpetcli"]=self["webpackChunkradarpetcli"]||[]).push([[443],{5773:function(e,a,t){t.d(a,{Z:function(){return y}});var o=t(3396),s=t(7139);const r=e=>((0,o.dD)("data-v-7c815c06"),e=e(),(0,o.Cn)(),e),i={id:"cardIdenti"},n=r((()=>(0,o._)("div",{id:"identi"},null,-1))),d={id:"identiInfo"},c={class:"dato"},l=r((()=>(0,o._)("label",{for:"NombreUsuario"},"Nombre: ",-1))),u={class:"dato"},p=r((()=>(0,o._)("label",{for:"apellido"},"Apellido: ",-1))),m={class:"dato"},h=r((()=>(0,o._)("label",{for:"tel"},"Teléfono: ",-1))),f={class:"dato"},g=r((()=>(0,o._)("label",{for:"mail"},"Email: ",-1)));function b(e,a,t,r,b,_){return(0,o.wg)(),(0,o.iD)("div",i,[n,(0,o._)("div",d,[(0,o._)("div",{id:"avatar",style:(0,s.j5)({backgroundImage:"url("+t.imagen+")"})},null,4),(0,o._)("div",c,[l,(0,o._)("p",null,"  "+(0,s.zw)(t.Usuario.nombre),1)]),(0,o._)("div",u,[p,(0,o._)("p",null," "+(0,s.zw)(t.Usuario.apellido),1)]),(0,o._)("div",m,[h,(0,o._)("p",null," "+(0,s.zw)(t.Usuario.telefono),1)]),(0,o._)("div",f,[g,(0,o._)("p",null," "+(0,s.zw)(t.Usuario.email),1)])])])}var _={name:"CardIdentificacion",props:{imagen:String,Usuario:Object}},v=t(89);const w=(0,v.Z)(_,[["render",b],["__scopeId","data-v-7c815c06"]]);var y=w},351:function(e,a,t){t.d(a,{Z:function(){return m}});var o=t(3396),s=t(7139);const r=["src"],i={key:1,class:"loader"},n={id:"datos"},d={key:0};function c(e,a,t,c,l,u){return(0,o.wg)(),(0,o.iD)("div",{id:"cardMascota",onClick:a[0]||(a[0]=(...e)=>u.irInfoMascota&&u.irInfoMascota(...e))},[l.imagen?((0,o.wg)(),(0,o.iD)("img",{key:0,id:"foto",src:l.imagen,alt:""},null,8,r)):(0,o.kq)("",!0),l.imagen?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",i)),(0,o._)("div",n,[l.imagen?((0,o.wg)(),(0,o.iD)("p",d,(0,s.zw)(t.mascota.Nombre),1)):(0,o.kq)("",!0)])])}var l={name:"CardMascota",props:{mascota:Object},data(){return{imagen:""}},mounted(){fetch(`http://90.171.80.211:4000/mascota/fotoMascota/${this.mascota._id}`,{}).then((e=>e.blob())).then((e=>{const a=URL.createObjectURL(e);this.imagen=a}))},methods:{irInfoMascota(){this.$router.push("/infoMascota/"+this.mascota._id)}}},u=t(89);const p=(0,u.Z)(l,[["render",c],["__scopeId","data-v-33fc2725"]]);var m=p},9690:function(e,a,t){t.d(a,{Z:function(){return _}});var o=t(3396),s=t(7139);const r={id:"cardMascota"},i=["src"],n={key:0},d={key:1},c={key:2},l={key:3},u={key:4},p={key:5},m={key:6};function h(e,a,t,h,f,g){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("img",{id:"foto",src:f.imagen,alt:""},null,8,i),(0,o._)("p",null," Nombre: "+(0,s.zw)(t.mascota.Nombre),1),t.mascota.Raza?((0,o.wg)(),(0,o.iD)("p",n,"Raza: "+(0,s.zw)(t.mascota.Raza),1)):(0,o.kq)("",!0),t.mascota.Tipo?((0,o.wg)(),(0,o.iD)("p",d,"Raza: "+(0,s.zw)(t.mascota.Tipo),1)):(0,o.kq)("",!0),t.mascota.Peso?((0,o.wg)(),(0,o.iD)("p",c,"Peso: "+(0,s.zw)(t.mascota.Peso),1)):(0,o.kq)("",!0),t.mascota.Edad?((0,o.wg)(),(0,o.iD)("p",l,"Edad: "+(0,s.zw)(t.mascota.Edad),1)):(0,o.kq)("",!0),t.mascota.Descripcion?((0,o.wg)(),(0,o.iD)("p",u,"Descripción: "+(0,s.zw)(t.mascota.Descripcion),1)):(0,o.kq)("",!0),t.mascota.Ubicacion?((0,o.wg)(),(0,o.iD)("p",p,"Ubicación: "+(0,s.zw)(t.mascota.Ubicacion),1)):(0,o.kq)("",!0),t.mascota.Contacto?((0,o.wg)(),(0,o.iD)("p",m,"Contacto: "+(0,s.zw)(t.mascota.Contacto),1)):(0,o.kq)("",!0)])}var f={name:"CardMascotaCompleta",props:{mascota:Object},data(){return{imagen:""}},mounted(){fetch(`http://90.171.80.211:4000/mascota/fotoMascota/${this.mascota._id}`,{}).then((e=>e.blob())).then((e=>{const a=URL.createObjectURL(e);this.imagen=a}))}},g=t(89);const b=(0,g.Z)(f,[["render",h],["__scopeId","data-v-0e9d2e26"]]);var _=b},2246:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var o=t(3396),s=t(9242),r=t(7139);const i=e=>((0,o.dD)("data-v-0346af0b"),e=e(),(0,o.Cn)(),e),n={id:"loginmode"},d=i((()=>(0,o._)("h2",null,"Iniciar Sesión",-1))),c=i((()=>(0,o._)("label",{for:"email"},"Email",-1))),l=i((()=>(0,o._)("label",{for:"password"},"Contraseña",-1))),u={id:"error"},p=i((()=>(0,o._)("button",{id:"enviar"},"Enviar",-1))),m={id:"cambiarRegister"},h=i((()=>(0,o._)("p",null,"¿No tienes cuenta?",-1))),f=i((()=>(0,o._)("button",null,"Registrarte",-1)));function g(e,a,t,i,g,b){const _=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("form",{onSubmit:a[2]||(a[2]=(0,s.iM)(((...e)=>b.iniciarSesion&&b.iniciarSesion(...e)),["prevent"]))},[d,c,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>g.user.email=e),name:"email"},null,512),[[s.nr,g.user.email]]),l,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>g.user.password=e),name:"password"},null,512),[[s.nr,g.user.password]]),(0,o._)("p",u,(0,r.zw)(g.error),1),p,(0,o._)("div",m,[h,(0,o.Wm)(_,{to:"/registrarse"},{default:(0,o.w5)((()=>[f])),_:1})])],32)])}var b={data(){return{error:"",imagen:"",user:{email:"",password:""}}},mounted(){document.title="Iniciar Sesión"},methods:{onFileSelected(e){this.imagen=URL.createObjectURL(e.target.files[0])},iniciarSesion(){fetch("http://90.171.80.211:4000/usuario/iniciarsesion",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.user)}).then((e=>e.json())).then((e=>{e.token?(this.$store.dispatch("setTokenSesion",e.token),this.$store.dispatch("setAvatarImage"),this.$router.push("/")):this.errores.server=e.msg}))}}},_=t(89);const v=(0,_.Z)(b,[["render",g],["__scopeId","data-v-0346af0b"]]);var w=v},535:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var o=t(3396);const s=e=>((0,o.dD)("data-v-5d3ce5c5"),e=e(),(0,o.Cn)(),e),r=s((()=>(0,o._)("h2",null,"Encontradas",-1))),i={id:"encontradas"};function n(e,a,t,s,n,d){const c=(0,o.up)("CardMascota");return(0,o.wg)(),(0,o.iD)(o.HY,null,[r,(0,o._)("section",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.mascotasEncontradas,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(c,{mascota:e},null,8,["mascota"])])))),128))])],64)}var d=t(351),c={name:"MascotasView",components:{CardMascota:d.Z},data(){return{mascotasEncontradas:[]}},mounted(){fetch("http://90.171.80.211:4000/mascota/mascotas",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.mascotasEncontradas=e.filter((e=>"Encontrado"===e.TipoEstado))}))}},l=t(89);const u=(0,l.Z)(c,[["render",n],["__scopeId","data-v-5d3ce5c5"]]);var p=u},5121:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var o=t(3396);const s=e=>((0,o.dD)("data-v-12b39817"),e=e(),(0,o.Cn)(),e),r=s((()=>(0,o._)("h2",null,"Perdidas",-1))),i={id:"perdidas"};function n(e,a,t,s,n,d){const c=(0,o.up)("CardMascota");return(0,o.wg)(),(0,o.iD)(o.HY,null,[r,(0,o._)("section",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.mascotasPerdidas,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(c,{mascota:e},null,8,["mascota"])])))),128))])],64)}var d=t(351),c={name:"MascotasView",components:{CardMascota:d.Z},data(){return{mascotasPerdidas:[]}},mounted(){fetch("http://90.171.80.211:4000/mascota/mascotas",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.mascotasPerdidas=e.filter((e=>"Perdido"===e.TipoEstado))}))}},l=t(89);const u=(0,l.Z)(c,[["render",n],["__scopeId","data-v-12b39817"]]);var p=u},6869:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var o=t(3396);const s=e=>((0,o.dD)("data-v-dfdf0eca"),e=e(),(0,o.Cn)(),e),r=s((()=>(0,o._)("h2",null,"Perdidas",-1))),i={id:"perdidas"},n=s((()=>(0,o._)("button",null,"Ver todas",-1))),d=s((()=>(0,o._)("h2",null,"Encontradas",-1))),c={id:"encontradas"},l=s((()=>(0,o._)("button",null,"Ver todas",-1)));function u(e,a,t,s,u,p){const m=(0,o.up)("CardMascota"),h=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[r,(0,o._)("section",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.randomPerdidas,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(m,{mascota:e},null,8,["mascota"])])))),128))]),(0,o.Wm)(h,{to:"/mascotas/perdidas"},{default:(0,o.w5)((()=>[n])),_:1}),d,(0,o._)("section",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.randomEncontradas,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o.Wm)(m,{mascota:e},null,8,["mascota"])])))),128))]),(0,o.Wm)(h,{to:"/mascotas/encontradas"},{default:(0,o.w5)((()=>[l])),_:1})],64)}t(1703);var p=t(351),m={name:"MascotasView",components:{CardMascota:p.Z},data(){return{randomEncontradas:[],randomPerdidas:[],mascotasEncontradas:[],mascotasPerdidas:[]}},mounted(){fetch("http://90.171.80.211:4000/mascota/mascotas",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>{if(200!==e.status)throw new Error("Error al obtener mascotas");return e.json()})).then((e=>{this.mascotasPerdidas=e.filter((e=>"Perdido"===e.TipoEstado)),this.mascotasEncontradas=e.filter((e=>"Encontrado"===e.TipoEstado))})).then((()=>{let e;e=screen.width>800?8:4,this.randomEncontradas=this.mascotasEncontradas.sort((()=>Math.random()-.5)).slice(0,e),this.randomPerdidas=this.mascotasPerdidas.sort((()=>Math.random()-.5)).slice(0,e)})).catch((e=>{console.log(e)}))}},h=t(89);const f=(0,h.Z)(m,[["render",u],["__scopeId","data-v-dfdf0eca"]]);var g=f},5191:function(e,a,t){t.r(a),t.d(a,{default:function(){return z}});var o=t(3396),s=t(7139),r=t(9242);const i=e=>((0,o.dD)("data-v-5c3794d6"),e=e(),(0,o.Cn)(),e),n=i((()=>(0,o._)("h2",null,"Crear Mascotas",-1))),d={key:0},c={key:1,class:"contenedorForm"},l=i((()=>(0,o._)("label",{for:"nombre"},"Nombre",-1))),u=i((()=>(0,o._)("label",{for:"tipo"},"Tipo",-1))),p=i((()=>(0,o._)("option",{value:"Perro"},"Perro",-1))),m=i((()=>(0,o._)("option",{value:"Gato"},"Gato",-1))),h=[p,m],f=i((()=>(0,o._)("label",{for:"Raza"},"Raza",-1))),g=i((()=>(0,o._)("label",{for:"Edad"},"Edad",-1))),b=i((()=>(0,o._)("label",{for:"Peso"},"Peso",-1))),_=i((()=>(0,o._)("label",{for:"contacto"},"Contacto",-1))),v=i((()=>(0,o._)("option",{value:"tel"},"Teléfono",-1))),w=i((()=>(0,o._)("option",{value:"mail"},"E-mail",-1))),y=[v,w],U=i((()=>(0,o._)("label",{for:"ubicacion"},"Ubicación",-1))),M=i((()=>(0,o._)("label",{for:"descripcion"},"Descripción",-1))),D=["src"],C=i((()=>(0,o._)("button",{id:"enviar"},"Enviar",-1)));function k(e,a,t,i,p,m){return(0,o.wg)(),(0,o.iD)(o.HY,null,[n,p.tipoestado?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("button",{onClick:a[0]||(a[0]=e=>p.tipoestado="Encontrado")},"Encontrado"),(0,o._)("button",{onClick:a[1]||(a[1]=e=>p.tipoestado="Perdido")},"Perdido")])),(0,o._)("p",null,(0,s.zw)(p.error),1),p.tipoestado?((0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("form",{onSubmit:a[11]||(a[11]=(0,r.iM)(((...e)=>m.enviarDatos&&m.enviarDatos(...e)),["prevent"]))},[l,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>p.Nombre=e),name:"Nombre"},null,512),[[r.nr,p.Nombre]]),u,(0,o.wy)((0,o._)("select",{name:"tipo",id:"tipo","onUpdate:modelValue":a[3]||(a[3]=e=>p.Tipo=e)},h,512),[[r.bM,p.Tipo]]),f,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>p.Raza=e),id:"raza",placeholder:"Raza"},null,512),[[r.nr,p.Raza]]),g,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=e=>p.edad=e),id:"edad",placeholder:"Edad"},null,512),[[r.nr,p.edad]]),b,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=e=>p.peso=e),id:"peso",placeholder:"Peso"},null,512),[[r.nr,p.peso]]),_,(0,o.wy)((0,o._)("select",{name:"contacto",id:"contacto","onUpdate:modelValue":a[7]||(a[7]=e=>p.tipocontacto=e)},y,512),[[r.bM,p.tipocontacto]]),U,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>p.Ubicacion=e),name:"ubicacion"},null,512),[[r.nr,p.Ubicacion]]),M,(0,o.wy)((0,o._)("textarea",{name:"descripcion",id:"descripcion",cols:"30",rows:"10","onUpdate:modelValue":a[9]||(a[9]=e=>p.Descripcion=e)},null,512),[[r.nr,p.Descripcion]]),(0,o._)("img",{id:"imagenavatar",src:p.imagen,alt:""},null,8,D),(0,o._)("input",{onChange:a[10]||(a[10]=(...e)=>m.onFileSelected&&m.onFileSelected(...e)),type:"file",id:"imagenup",ref:"foto",name:"foto"},null,544),C],32)])):(0,o.kq)("",!0)],64)}var E={data(){return{error:"",tipoestado:"",contacto:"",Nombre:"",imagen:"",Ubicacion:"",Descripcion:"",Tipo:"",Raza:"",edad:"",peso:"",tipocontacto:""}},mounted(){document.title="Nueva Mascota",this.$store.getters.getTokenSesion||this.$router.push("/iniciarsesion")},methods:{onFileSelected(e){this.imagen=URL.createObjectURL(e.target.files[0])},enviarDatos(){"tel"===this.tipocontacto?this.contacto=this.$store.getters.getUsuario.telefono:this.contacto=this.$store.getters.getUsuario.email;const e={TipoEstado:this.tipoestado,Nombre:this.Nombre,Ubicacion:this.Ubicacion,Tipo:this.Tipo,Raza:this.Raza,Edad:this.edad,Peso:this.peso,Tipocontacto:this.tipocontacto,Contacto:this.contacto,Descripcion:this.Descripcion},a=new FormData;a.append("datos",JSON.stringify(e)),a.append("foto",this.$refs.foto.files[0]),fetch("http://90.171.80.211:4000/mascota/nueva",{method:"POST",headers:{key:this.$store.getters.getTokenSesion},body:a}).then((e=>{if(200!==e.status)return e.json();this.$router.push("/")})).then((e=>this.error=e.msg))}}},T=t(89);const S=(0,T.Z)(E,[["render",k],["__scopeId","data-v-5c3794d6"]]);var z=S},6433:function(e,a,t){t.r(a),t.d(a,{default:function(){return Y}});var o=t(3396),s=t(9242),r=t(7139);const i=e=>((0,o.dD)("data-v-35a2dde4"),e=e(),(0,o.Cn)(),e),n={id:"datosUsuario"},d=i((()=>(0,o._)("label",{for:"NombreUsuario"},"NombreUsuario",-1))),c=i((()=>(0,o._)("label",{for:"apellido"},"Apellido",-1))),l=i((()=>(0,o._)("label",{for:"tel"},"Teléfono",-1))),u=i((()=>(0,o._)("label",{for:"email"},"Email",-1))),p=i((()=>(0,o._)("label",{for:"avatar"},"Avatar",-1))),m=i((()=>(0,o._)("button",{id:"enviar"},"Actualizar Datos",-1))),h={id:"mascotasList"},f={id:"mascotaInfo"};function g(e,a,t,i,g,b){const _=(0,o.up)("CardIdentificacion"),v=(0,o.up)("EditMascota"),w=(0,o.up)("CardMascota");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o._)("form",{onSubmit:a[5]||(a[5]=(0,s.iM)(((...e)=>b.EditarUsuario&&b.EditarUsuario(...e)),["prevent"]))},[(0,o._)("h2",null,"Bienvenido "+(0,r.zw)(b.datoUsuario.nombre),1),(0,o._)("p",null,(0,r.zw)(g.editUserStatus),1),d,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>g.user.nombre=e),id:"NombreUsuario",name:"nombre"},null,512),[[s.nr,g.user.nombre]]),c,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>g.user.apellido=e),id:"apellido",name:"apellido"},null,512),[[s.nr,g.user.apellido]]),l,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>g.user.telefono=e),id:"tel",name:"tel"},null,512),[[s.nr,g.user.telefono]]),u,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>g.user.email=e),id:"mail",name:"email"},null,512),[[s.nr,g.user.email]]),p,(0,o._)("input",{onChange:a[4]||(a[4]=(...e)=>b.onFileSelected&&b.onFileSelected(...e)),type:"file",id:"imagenup",ref:"avatar",name:"foto"},null,544),m],32),(0,o.Wm)(_,{imagen:g.imagen,Usuario:g.user,class:"hiddenCardOnMovile"},null,8,["imagen","Usuario"])]),(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(g.mascotas,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o._)("div",f,[(0,o.Wm)(v,{onBorrado:b.removeMascota,mascota:e,propiedad:!0},null,8,["onBorrado","mascota"]),(0,o.Wm)(w,{class:"hiddenCardOnMovile",mascota:e},null,8,["mascota"])])])))),128))])],64)}const b=e=>((0,o.dD)("data-v-b4ef6892"),e=e(),(0,o.Cn)(),e),_={id:"Card"},v=["src"],w={key:0,class:"cardForm"},y={key:0},U=b((()=>(0,o._)("p",null,"Mascota Caducada, si quiere volver a activarla otros 3 meses pulsa aquí",-1))),M={key:1},D=b((()=>(0,o._)("label",{for:"Nombre"},"Nombre",-1))),C=b((()=>(0,o._)("label",{for:"Raza"},"Raza",-1))),k=b((()=>(0,o._)("label",{for:"tipo"},"Tipo",-1))),E=b((()=>(0,o._)("option",{value:"Perro"},"Perro",-1))),T=b((()=>(0,o._)("option",{value:"Gato"},"Gato",-1))),S=[E,T],z=b((()=>(0,o._)("label",{for:"contacto"},"Contacto",-1))),$=b((()=>(0,o._)("option",{value:"tel"},"Teléfono",-1))),j=b((()=>(0,o._)("option",{value:"mail"},"E-mail",-1))),P=[$,j],R=b((()=>(0,o._)("label",{for:"Peso"},"Peso",-1))),N=b((()=>(0,o._)("label",{for:"Edad"},"Edad",-1))),V=b((()=>(0,o._)("label",{for:"descripcion"},"Descripción",-1))),I=b((()=>(0,o._)("label",{for:"Ubicacion"},"Ubicacion",-1))),A=b((()=>(0,o._)("label",{for:"fotoMascota"},"Foto Mascota",-1))),F=b((()=>(0,o._)("button",{type:"submit"},"Guardar",-1)));function L(e,a,t,i,n,d){return(0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("img",{class:"hideonPC",style:(0,r.j5)({caducada:n.isCaducada}),id:"foto",src:n.imagen,alt:""},null,12,v),1==t.propiedad?((0,o.wg)(),(0,o.iD)("div",w,[1==this.isCaducada?((0,o.wg)(),(0,o.iD)("div",y,[U,(0,o._)("button",{onClick:a[0]||(a[0]=(...e)=>d.activarMascota&&d.activarMascota(...e))},"Activar Mascota")])):((0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("form",{id:"datosmascotaedit",onSubmit:a[10]||(a[10]=(0,s.iM)(((...e)=>d.editarMascota&&d.editarMascota(...e)),["prevent"]))},[D,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>n.datosMascota.Nombre=e),id:"nombre",placeholder:"Nombre"},null,512),[[s.nr,n.datosMascota.Nombre]]),C,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>n.datosMascota.Raza=e),id:"raza",placeholder:"Raza"},null,512),[[s.nr,n.datosMascota.Raza]]),k,(0,o.wy)((0,o._)("select",{name:"tipo",id:"tipo","onUpdate:modelValue":a[3]||(a[3]=e=>n.datosMascota.Tipo=e)},S,512),[[s.bM,n.datosMascota.Tipo]]),z,(0,o.wy)((0,o._)("select",{name:"contacto",id:"contacto","onUpdate:modelValue":a[4]||(a[4]=e=>n.datosMascota.Tipocontacto=e)},P,512),[[s.bM,n.datosMascota.Tipocontacto]]),R,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=e=>n.datosMascota.Peso=e),id:"peso",placeholder:"Peso"},null,512),[[s.nr,n.datosMascota.Peso]]),N,(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=e=>n.datosMascota.Edad=e),id:"edad",placeholder:"Edad"},null,512),[[s.nr,n.datosMascota.Edad]]),V,(0,o.wy)((0,o._)("textarea",{name:"descripcion",id:"descripcion",cols:"30",rows:"10","onUpdate:modelValue":a[7]||(a[7]=e=>n.datosMascota.Descripcion=e)},null,512),[[s.nr,n.datosMascota.Descripcion]]),I,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>n.datosMascota.Ubicacion=e),id:"ubicacion",placeholder:"Ubicacion"},null,512),[[s.nr,n.datosMascota.Ubicacion]]),A,(0,o._)("input",{onChange:a[9]||(a[9]=(...e)=>d.onFileMascotaSelected&&d.onFileMascotaSelected(...e)),type:"file",id:"imagenMascota",ref:"fotoMascota",name:"fotoMascota"},null,544),F],32)])),(0,o._)("button",{onClick:a[11]||(a[11]=(...e)=>d.borrarMascota&&d.borrarMascota(...e))},"Borrar"),(0,o._)("p",null,(0,r.zw)(this.status),1)])):(0,o.kq)("",!0)])}var O={name:"EditMascota",props:{propiedad:{type:Boolean,default:!1},mascota:Object},emits:["borrado"],data(){return{datosMascota:this.mascota,isCaducada:!1,imagen:"",status:""}},mounted(){const e=new Date(this.mascota.FechaExpiracion);e<new Date&&(this.isCaducada=!0),fetch(`http://90.171.80.211:4000/mascota/fotoMascota/${this.mascota._id}`,{}).then((e=>e.blob())).then((e=>{const a=URL.createObjectURL(e);this.imagen=a}))},methods:{activarMascota(){fetch(`http://90.171.80.211:4000/mascota/aumentarCaducidad/${this.mascota._id}`,{method:"PUT",headers:{Key:this.$store.getters.getTokenSesion}}).then((e=>e.json())).then((e=>{this.status=e.msg,this.isCaducada=!1}))},onFileMascotaSelected(e){this.imagen=URL.createObjectURL(e.target.files[0])},editarMascota(){"tel"===this.Tipocontacto?this.Contacto=this.$store.getters.getUsuario.telefono:this.Contacto=this.$store.getters.getUsuario.email;const e=new FormData,a=this.datosMascota;e.append("datos",JSON.stringify(a)),e.append("foto",this.$refs.fotoMascota.files[0]),fetch(`http://90.171.80.211:4000/mascota/updateDatos/${this.mascota._id}`,{method:"PUT",headers:{Key:this.$store.getters.getTokenSesion},body:e}).then((e=>{200===e.status?this.status="Datos actualizados":this.status=e.msg}))},borrarMascota(){confirm("¿Estas seguro de borrar la mascota?")&&fetch(`http://90.171.80.211:4000/mascota/mascota/${this.mascota._id}`,{headers:{Key:this.$store.getters.getTokenSesion},method:"DELETE"}).then((e=>{200===e.status?this.$emit("borrado",this.mascota._id):console.log(e.msg)}))}}},x=t(89);const Z=(0,x.Z)(O,[["render",L],["__scopeId","data-v-b4ef6892"]]);var q=Z,K=t(5773),G=t(9690),W={name:"PerfilUsuario",components:{EditMascota:q,CardIdentificacion:K.Z,CardMascota:G.Z},data(){return{user:this.$store.getters.getUsuario,mascotas:[],imagen:this.$store.getters.getAvatar,status:"",editUserStatus:""}},methods:{EditarUsuario(){const e=new FormData;e.append("datos",JSON.stringify(this.user)),e.append("avatar",this.$refs.avatar.files[0]),fetch("http://90.171.80.211:4000/usuario/updateDatos/",{method:"PUT",headers:{Key:this.$store.getters.getTokenSesion},body:e}).then((e=>(200===e.status&&(this.$store.dispatch("getUserInfo"),this.$store.dispatch("setAvatarImage")),e.json()))).then((e=>{this.editUserStatus=e.msg}))},removeMascota(e){const a=this.mascotas.findIndex((a=>a.id===e));this.mascotas.splice(a,1)},onFileSelected(e){this.imagen=URL.createObjectURL(e.target.files[0])}},computed:{datoUsuario(){return this.$store.getters.getUsuario}},created(){this.$store.getters.getAvatar||fetch("http://90.171.80.211:4000/usuario/getAvatar/",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.blob())).then((e=>{const a=URL.createObjectURL(e);this.imagen=a})),fetch("http://90.171.80.211:4000/usuario/getUsuario",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.user=e})),fetch("http://90.171.80.211:4000/mascota/getFromUser",{method:"GET",headers:{Key:this.$store.getters.getTokenSesion,Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.mascotas=e}))}};const H=(0,x.Z)(W,[["render",g],["__scopeId","data-v-35a2dde4"]]);var Y=H},1604:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}});var o=t(3396),s=t(9242),r=t(7139);const i=e=>((0,o.dD)("data-v-42925d4c"),e=e(),(0,o.Cn)(),e),n={id:"register"},d={class:"Formulario"},c=i((()=>(0,o._)("h2",null,"Registra tus datos",-1))),l=i((()=>(0,o._)("label",{for:"NombreUsuario"},"Nombre",-1))),u=i((()=>(0,o._)("label",{for:"apellido"},"Apellidos",-1))),p=i((()=>(0,o._)("label",{for:"tel"},"Teléfono",-1))),m=i((()=>(0,o._)("label",{for:"email"},"Email",-1))),h=i((()=>(0,o._)("label",{for:"password"},"Contraseña",-1))),f=i((()=>(0,o._)("label",{for:"password"},"Repite la Contraseña",-1))),g=i((()=>(0,o._)("label",{for:"avatar"},"Avatar",-1))),b=i((()=>(0,o._)("button",{id:"enviar"},"Enviar",-1))),_={id:"sectionidenti"};function v(e,a,t,i,v,w){const y=(0,o.up)("CardIdentificacion");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("section",d,[(0,o._)("form",{onSubmit:a[9]||(a[9]=(0,s.iM)(((...e)=>w.comprobarDatos&&w.comprobarDatos(...e)),["prevent"]))},[c,(0,o._)("p",null,(0,r.zw)(this.errores.server),1),(0,o._)("p",null,(0,r.zw)(this.errores.passregex),1),l,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>v.user.nombre=e),onChange:a[1]||(a[1]=(...e)=>w.verificarNombre&&w.verificarNombre(...e)),id:"NombreUsuario"},null,544),[[s.nr,v.user.nombre]]),(0,o._)("span",null,(0,r.zw)(v.errores.nombre),1),u,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>v.user.apellido=e),onChange:a[3]||(a[3]=(...e)=>w.verificarApellido&&w.verificarApellido(...e)),id:"apellido",name:"apellido"},null,544),[[s.nr,v.user.apellido]]),(0,o._)("span",null,(0,r.zw)(v.errores.apellido),1),p,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>v.user.telefono=e),id:"tel",name:"tel"},null,512),[[s.nr,v.user.telefono]]),(0,o._)("span",null,(0,r.zw)(v.errores.telefono),1),m,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>v.user.email=e),id:"mail",name:"registeremail"},null,512),[[s.nr,v.user.email]]),(0,o._)("span",null,(0,r.zw)(v.errores.email),1),h,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[6]||(a[6]=e=>v.user.password=e),name:"registerpassword"},null,512),[[s.nr,v.user.password]]),f,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":a[7]||(a[7]=e=>v.password2=e),name:"registerpassword2"},null,512),[[s.nr,v.password2]]),(0,o._)("span",null,(0,r.zw)(v.errores.password),1),g,(0,o._)("input",{onChange:a[8]||(a[8]=(...e)=>w.onFileSelected&&w.onFileSelected(...e)),type:"file",id:"imagenup",ref:"foto",name:"foto"},null,544),(0,o._)("span",null,(0,r.zw)(v.errores.imagen),1),b],32)]),(0,o._)("section",_,[(0,o.Wm)(y,{class:"hiddenCardOnMovile",imagen:v.imagen,Usuario:v.user},null,8,["imagen","Usuario"])])])}var w=t(5773),y={components:{CardIdentificacion:w.Z},data(){return{password2:"",errores:{passregex:"",nombre:"",apellido:"",telefono:"",email:"",password:"",server:""},imagen:"",user:{nombre:"",apellido:"",telefono:"",email:"",password:""}}},mounted(){document.title="Register"},methods:{verificarNombre(e){e.target.classList.remove("inputFail"),this.errores.nombre="",this.user.nombre.length<3&&(e.target.classList.add("inputFail"),this.errores.nombre="El nombre debe tener al menos 3 caracteres"),this.user.nombre.length>40&&(e.target.classList.add("inputFail"),this.errores.nombre="Nombre demasiado largo")},verificarApellido(e){e.target.classList.remove("inputFail"),this.errores.apellido="",this.user.apellido.length<5&&(this.errores.apellido="Apellido vacío o muy corto"),this.user.apellido.length>40&&(this.errores.apellido="Apellido demasiado largo")},onFileSelected(e){this.imagen=URL.createObjectURL(e.target.files[0])},iniciarSesion(){const e={email:this.user.email,password:this.user.password};fetch("http://90.171.80.211:4000/usuario/iniciarsesion",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.token?(this.$store.dispatch("setTokenSesion",e.token),this.$store.dispatch("setAvatarImage"),this.$router.push("/")):this.errores.server=e.msg}))},comprobarDatos(){let e=!1;this.errores.nombre="",this.errores.apellido="",this.errores.telefono="",this.errores.email="",this.errores.password="",this.errores.passregex="",this.errores.imagen="";const a=/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$/;a.test(this.user.password)||(this.errores.password="La contraseña no es segura",this.errores.passregex="La contraseña debe tener al menos 8 caracteres, una mayúscula, una minúscula, un número y un caracter especial",e=!0),this.user.password!==this.password2&&(this.errores.password="Las contraseñas no coinciden",e=!0);const t=/^([\da-z_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;t.test(this.user.email)||(this.errores.email="Email no válido",e=!0),this.user.email>40&&(this.errores.email="Email no válido",e=!0),this.user.nombre.length<5&&(this.errores.nombre="Nombre vacío o muy corto",e=!0),this.user.nombre.length>40&&(this.errores.nombre="Nombre demasiado largo",e=!0),!1===e&&this.registrarUsuario()},registrarUsuario(){const e=this.user,a=new FormData;a.append("datos",JSON.stringify(e)),a.append("avatar",this.$refs.foto.files[0]),fetch("http://90.171.80.211:4000/usuario/registrarse",{method:"POST",body:a}).then((e=>{if(200!==e.status)return e.json().then((e=>{this.errores.server=e.msg.server,this.errores.email=e.msg.email}));this.$router.push("/iniciarsesion")}))}}},U=t(89);const M=(0,U.Z)(y,[["render",v],["__scopeId","data-v-42925d4c"]]);var D=M}}]);
//# sourceMappingURL=about.de8154dd.js.map